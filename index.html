<!DOCTYPE html>
<html>

<head><meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
<title>Creative Button Styles </title>
<meta name="description" content="Creative Button Styles  - Modern and subtle styles &amp; effects for buttons" />
<meta name="keywords" content="button styles, css3, modern, flat button, subtle, effects, hover, web design" />
<meta name="author" content="Codrops" />
<link rel="shortcut icon" href="../favicon.ico"> 
<link rel="stylesheet" type="text/css" href="css/default.css" />
<link rel="stylesheet" type="text/css" href="css/component.css" />
<script src="js/modernizr.custom.js"></script>
    
<link rel="stylesheet" type="text/css" href="stylesheet.css">
<script type="text/javascript" src="themoviedb.js"></script>
<script type="text/javascript" src="idtools.js"></script>
</head>

<body align= "center">
    <img src="antlerstransparent.png" alt="antlers" class="displayed" style="width:200px;height:200px;" > 
    <h2> ANTLR </h2>
    <input class = "displayed" type="text" placeholder="keyword" name="keyword" id="keyword">
    <input class = "displayed" type="text" placeholder="people" name="people" id="people">
    <a href="#" class="myButton">SEARCH</a>
    
<script>

var people = [];
var keywords = [];
var movies = [];
var peopleID = [];
var keywordsID = [];

function search(){
        keywords.push(document.getElementById("keyword").value);
        people.push(document.getElementById("people").value)
        main();
}

function main(){
        for(i = 0; i < people.length; i++){
                theMovieDb.search.getPerson({"query":escape(people[i])},getPeopleID, errorCB);
        }

        // gets ID # of all keywords
        for(i = 0; i < keywords.length; i++){
                theMovieDb.search.getKeyword({"query":escape(keywords[i])},getKeywordID, errorCB);
        }

        //searches for movies with people & kewords tags
        console.log(peopleID);
        console.log(keywordsID);
        theMovieDb.discover.getMovies({"with_cast":peopleID.toString(),"with_keywords":keywordsID.toString()}, discoverMovies, errorCB);
        // theMovieDb.discover.getMovies({"with_cast":287,"with_keywords":211721}, discoverMovies, errorCB);
        // theMovieDb.discover.getMovies({"with_cast":287}, discoverMovies, errorCB);
}

function discoverMovies(data){
        var arrayData = JSON.parse(data);
        // console.log(arrayData);
        console.log(arrayData["results"]);
        for(i = 0; i < arrayData["results"].length; i++){    
            movies.push(arrayData["results"][i]["title"]);
               
        }
        console.log(movies);
        document.getElementById("list").innerHTML = movies;
       // document.getElementById("list").innerHTML = movies;
}

</script>
</body>
    
</html>
